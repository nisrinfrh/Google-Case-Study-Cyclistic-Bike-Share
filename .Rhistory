table(aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = mean))
table(aggregate(all_trips2$ride_length ~ all_trips2$member_casual, FUN = mean))
library(readr)
alltrips <- read_csv("alltrips.csv")
View(alltrips)
table(aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = mean))
table(aggregate(all_trips$ride_length ~ all_trips$member_casual, FUN = mean))
install.packages("rmarkdown")
install.packages("rmarkdown")
library(rmarkdown)
knitr::opts_chunk$set(echo = TRUE)
install.packages("dplyr")
library(dplyr)
install.packages(dplyr)
library(dbplyr)
library(dplyr)
q9_2020 <- mutate(q9_2020, ride_id = as.character(ride_id)
,rideable_type = as.character(rideable_type))
q1_2020 <- read_csv("Divvy_Trips_2020_Q1.csv")
q1_2020 <- read_csv("Divvy_Trips_2020_Q1.csv")
q1_2020 <- read_csv("Divvy_Trips_2020_Q1.csv")
library(tidyverse)
library(dplyr)
q1_2020 <- read_csv("Divvy_Trips_2020_Q1.csv")
q4_2020 <- read_csv("Q4.csv")
q5_2020 <- read_csv("Q5.csv")
q6_2020 <- read_csv("Q6.csv")
q7_2020 <- read_csv("Q7.csv")
q8_2020 <- read_csv("Q8.csv")
q9_2020 <- read_csv("Q9.csv")
q10_2020 <- read_csv("Q10.csv")
q11_2020 <- read_csv("Q11.csv")
q12_2020 <- read_csv("Q12.csv")
library(dplyr)
colnames(q1_2020)
colnames(q11_2020)
colnames(q4_2020)
colnames(q5_2020)
colnames(q6_2020)
colnames(q7_2020)
colnames(q8_2020)
colnames(q9_2020)
colnames(q10_2020)
colnames(q12_2020)
q9_2020 <- mutate(q9_2020, ride_id = as.character(ride_id)
,rideable_type = as.character(rideable_type))
all_trips <- bind_rows(q1_2020, q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
str(q9_2020)
str(q10_2020)
str(q9_2020)
str(q10_2020)
q10_2020 <- mutate(q10_2020, start_staion=as.num(start_station_name))
q10_2020 <- mutate(q10_2020, start_staion=num(start_station_name))
q10_2020 <- mutate(q10_2020, start_staion_name=num(start_station_name))
q10_2020 <- mutate(q10_2020, start_staion_name=as.numeric(start_station_name))
is.numeric(q10_2020$start_station_id)
q10_2020 <- mutate(q10_2020, start_staion_id=as.numeric(start_station_name))
is.numeric(q9_2020$start_station_id)
q10_2020 <- mutate(q10_2020, start_staion_id=as.numeric(start_station_id))
all_trips <- bind_rows(q1_2020, q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
is.numeric(q10_2020$start_station_id)
is.numeric(q9_2020$start_station_id)
q10_2020 <- mutate(q10_2020, start_staion_id=as.numeric(start_station_id))
all_trips <- bind_rows(q1_2020, q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
library(dplyr)
all_trips <- bind_rows(q1_2020, q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
q10_2020 <- mutate(q10_2020, start_staion_id=as.character(start_station_id))
all_trips <- bind_rows(q1_2020, q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
q9_2020 <- mutate(q9_2020, start_staion_id=as.character(start_station_id))
all_trips <- bind_rows(q1_2020, q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
all_trip <- bind_rows(q1_2020, q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
library(conflicted)
conflict_prefer
all_trip <- bind_rows(q1_2020, q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
all_trip <- bind_rows(q1_2020,q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
str(q10_2020)
q9_2020 <- mutate(q9_2020, start_staion_id=as.numeric(start_station_id))
q10_2020 <- mutate(q10_2020, start_staion_id=as.numeric(start_station_id))
all_trip <- bind_rows(q1_2020,q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
conflict_prefer
all_trip <- bind_rows(q1_2020,q4_2020,q5_2020,q6_2020,q7_2020,q8_2020,q9_2020,q10_2020,q11_2020,q12_2020)
all_trips$ride_length <- difftime(all_trips$ended_at,all_trips$started_at)
library(tidyverse) #helps wrangle data
library(conflicted)
conflict_prefer("filter", "dplyr")
conflict_prefer("lag", "dplyr")
q12020 <- read_csv("Divvy_Trips_2020_Q1.csv")
q42020 <- read_csv("Q4.csv")
q52020 <- read_csv("Q5.csv")
q62020 <- read_csv("Q6.csv")
q72020 <- read_csv("Q7.csv")
q82020 <- read_csv("Q8.csv")
q92020 <- read_csv("Q9.csv")
q102020 <- read_csv("Q10.csv")
q112020 <- read_csv("Q11.csv")
q122020 <- read_csv("Q12.csv")
q122020 <- mutate(q122020,start_station_id  = as.numeric (start_station_id ))
q12020 <- mutate(q12020,end_station_id  = as.numeric (end_station_id ))
q122020 <- mutate(q122020,end_station_id  = as.numeric (end_station_id ))
all_trips <- bind_rows(q12020, q42020,q52020,q62020,q72020,q82020,q92020,q102020,q112020,q122020)
all_trips <- all_trips %>%
select(-c(start_lat, start_lng, end_lat, end_lng, start_station_id,end_station_id))
table(all_trips$member_casual)
all_trips <- all_trips %>%
mutate(member_casual = recode(member_casual
,"Subscriber" = "member"
,"Customer" = "casual"))
all_trips$date <- as.Date(all_trips$started_at) #The default format is yyyy-mm-dd
all_trips$month <- format(as.Date(all_trips$date), "%m")
all_trips$day <- format(as.Date(all_trips$date), "%d")
all_trips$day_of_week <- format(as.Date(all_trips$date), "%A")
all_trips$ride_length <- difftime(all_trips$ended_at,all_trips$started_at)
is.factor(all_trips$ride_length)
all_trips$ride_length <- as.numeric(as.character(all_trips$ride_length))
is.numeric(all_trips$ride_length)
all_trips_v2 <- all_trips[!(all_trips$start_station_name == "HQ QR" | all_trips$ride_length<0),]
summary(all_trips_v2$ride_length)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = mean)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = median)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = max)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = min)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week,
FUN = mean)
all_trips_v2$day_of_week <- ordered(all_trips_v2$day_of_week, levels=c("Sunday", "Monday",
"Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"))
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week,
FUN = mean)
all_trips_v2 %>%
mutate(weekday = wday(started_at, label = TRUE)) %>% #creates weekday field using
wday()
all_trips_v2 %>%
mutate(weekday = wday(started_at, label = TRUE)) %>% #creates weekday field using
wday()
all_trips_v2 %>%
mutate(weekday = wday(started_at, label = TRUE)) %>% #creates weekday field using wday()
group_by(member_casual, weekday) %>% #groups by usertype and weekday
summarise(number_of_rides = n() #calculates the number of rides and average duration
,average_duration = mean(ride_length)) %>% # calculates the average  duration
arrange(member_casual, weekday)
write.csv(all_ride,file=all_trips_v2)
write.csv(all_ride,file=all_trips_v2.csv)
View(alltrips)
write.csv(all_trips_v2,file=all_ride.csv)
write.csv(all_trips_v2,file="all_ride.csv")
